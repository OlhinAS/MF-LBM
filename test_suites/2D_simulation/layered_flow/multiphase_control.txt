#*********************************************************************************#
#*          CONTROL FILE FOR MULTIPHASE FLOW SIMULATION IN MF-LBM-2D             *#
#*********************************************************************************#

#=========================== simulation_status ====================================
# value stored on job_status.dat                                      
# new_simulation         - new simulation                                  
# continue_simulation    - continue existing simulation               
# simulation_done        - simulation already finished. stop              
# simulation_failed      - previous simulation failed. stop            
# else                   - wrong status. stop                                       

#=========================== simulation setup =====================================
# simulation setup preset (option is 1 in dummy control file): 
# 1 - (Warning! It will override inappropriate settings) fluid1 displacing fluid2 
#     in a channel (velocity inlet and convective outlet)                   
# 2 - (Warning! It will override inappropriate settings) a drop attached to y=1,
#     initial drop radius = initial_interface_position, until steady state
#     (x direction periodic BC)
# 0 or else - not using presets                   
simulation_setup_option 0

# breakthrough check (only works when use open BCs and Ca>0): whether exiting the
# simulation when the invading phase reaches the outlet, 0 - not check; 1 - check
breakthrough_check 0

# steady state option: 0 - unsteady state simulation; 1 - steady state simulation 
# (based on capillary pressure); 2 - steady state simulation (based on phase field)
# 3 - steady state simulation (based on flowrate)
steady_state_option 3

# modify_geometry_cmd: not modify geometry 0; modify geometry in the code (Misc.F90) 1 
modify_geometry_cmd 0

# external geometry name (without .dat extension, fixed path: ../../walldata/*.dat) 
geometry_name walls

#=================================  geometry ======================================
# global nx, ny, must be integral multiple of npx, npy
lattice_dimensions 100,60

# buffer layers along x direction
buffer_layers 0,0

# excluded layers in bulk property calculation along x direction
exclude_layers 0,0

# default flow direction, domain_wall_status at xmin and xmax, status: 1 - wall; 0 - no wall
domain_wall_status_x 0,0

# domain_wall_status at ymin and ymax, status: 1 - wall; 0 - no wall
domain_wall_status_y 1,1

# periodic BC indicator, 1 periodic, 0 non-periodic
periodic_indicator 1,0

# inlet_BC selection (overridden by x direction periodic BC): 1-velocity; 2-pressure 
inlet_BC 1
# outlet_BC selection (overridden by x direction periodic BC): 1-convective; 2-pressure 
outlet_BC 1

#===================================== MPI ========================================
# mpi process numbers along x axis (y axis domain decomposition not implemented)
# nxglobal must be divided by MPI_process_num
MPI_process_num 2

#=============================== fluid property ===================================
# fluid viscosity, if fluid2_viscosity<0, then use viscosity_ratio_log instead
# viscosity ratio logM, M = nu1 / nu2
fluid1_viscosity 0.03d0
fluid2_viscosity 0.3d0
viscosity_ratio_log -1d0   

# surface tension
surface_tension 0.03d0

# contact angle (measured through the defending phase)
theta 30d0

# beta in RK recolor scheme
RK_beta 0.95d0

#============================= injection conditions ===============================
# initial interface position alng x axis(multiphase) or initial drop radius for drop test 
initial_interface_position 15d0

# initial or maximum capillary number
capillary_number 0d-6

# injecting fluid saturation (1: pure fluid1 injection; 0: pure fluid2 injection
saturation_injection 1d0   

# initial value of body force or pressure gradient along x direction
body_force_x0 1d-7

# initial value of body force or pressure gradient along y direction
body_force_y0 0d-6

#================================== timers ========================================
# timer: max iterations
max_time_step 999999000

# timer: when to output detailed visualization data - overridden by d_vol_detail if d_vol_detail>0  
ntime_visual 500000

# timer: when to output animation data - overridden by d_vol_animation if d_vol_animation>0 
ntime_animation 9990000

# timer: when to output bulk property data - overridden by d_vol_monitor if d_vol_monitor>0 
monitor_timer 5000

# timer: when to output profile data along flow direction
# monitor_profile_timer = monitor_profile_timer_ratio * monitor_timer 
monitor_profile_timer_ratio 5

# timer: gaps used to record computation time
computation_time_timer 10000

# timer: when to display time steps
display_steps_timer 10000

# timer: when to output animation data - based on injected volume (only for constant velocity BC)
d_vol_animation -1d0

# timer: when to output full field data - based on injected volume (only for constant velocity BC)
d_vol_detail -1d0

# timer: when to output bulk property data - based on injected volume (only for constant velocity BC)
d_vol_monitor -1d0

# timer: when to output full field data (non-VTK) - based on volume fraction (before breakthrough); 
# voided if d_sa_vol<0 
d_sa_vol -1d0

# timer: when to store full PDF data based on wall clock time, in hours
wallclock_pdfsave_timer 15.5

